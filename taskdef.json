{
  "family": "ecs-new-bg-family",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "512",
  "memory": "1024",
  "executionRoleArn": "arn:aws:iam::818111885437:role/ecs-pre-bg-task-exec-role",
  "taskRoleArn": "arn:aws:iam::818111885437:role/ecs-pre-bg-task-exec-role",
  "containerDefinitions": [
    {
      "name": "nginx",
      "image": "nginx:alpine",
      "essential": true,
      "portMappings": [
        { "containerPort": 80, "protocol": "tcp" }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "new-ecs-log_group-backend",
          "awslogs-region": "ap-northeast-1",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "command": [
        "sh",
        "-c",
        "echo 'nginx build up' && mkdir -p /usr/share/nginx/html/new && printf '<html><body style=\"background:blue;color:white;font-size:48px;display:flex;align-items:center;justify-content:center;height:100vh;\">New BLUE</body></html>' > /usr/share/nginx/html/new/index.html && nginx -g 'daemon off;'"
      ]
    }
  ]
}


